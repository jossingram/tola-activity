{% extends "base.html" %}
{% block bread_crumb %}
<div>
<ol class="breadcrumb">
  <li><a href="/activitydb/dashboard/0/">Program Dashboards</a></li>
  <li class="active">Project Dashboard</li>
</ol>
</div>
{% endblock %}
{% block page_title %}Project Dashboard{% endblock %}

{% block content %}
<div>
<div class="dropdown">
  <button class="btn btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" aria-expanded="true">
    Programs
    <span class="caret"></span>
  </button>
  <ul class="dropdown-menu" role="menu" aria-labelledby="dropdownMenu1">
    {% for program in getPrograms %}
        <li role="presentation"><a role="menuitem" tabindex="-1" href="/activitydb/dashboard/{{ program.id }}">{{ program.gaitid}} - {{ program.name }}</a></li>
    {% endfor %}
  </ul>
  <a href="/activitydb/projectagreement_add" class="btn btn-large btn-success">New Project</a>
  <a href="/activitydb/projectagreement_import" class="btn btn-large btn-info" data-toggle="modal" data-target="#importModal">Import Project</a>
</div>
</div>
<br/>
<ul class="list-group">
<h3><a href="https://gait.mercycorps.org/editgrant.vm?GrantID={{ getProgram.gaitid }}" target=_new">GAITID: {{ getProgram.gaitid }}</a> {{ getProgram.name }}<span style="float: right;"><a href="/activitydb/projectagreement_detail/{{ getAgreement.id }}/" class="btn btn-sm btn-info">Print View</a></span></h3>
    {% if getAgreement %}
    <div class="jumbotron">
        <ul class="list-group">
            <li class="list-group-item list-group-item-info">
                <h4>Project Agreement</h4>
                <span></span>
            </li>

            <li class="list-group-item"><b>Name: </b>{{ getAgreement.project_name }}<br/>
                <b>Activity Code: </b>{{ getAgreement.activity_code }}<br/>
                <b>Created:</b> <span class="date-badge">{{ getAgreement.create_date|date }}</span> <b>Edited:</b> <span class="date-badge">{{ getAgreement.edit_date|date }}</span>
            </li>
            <li class="list-group-item">
                <div class="btn-group" role="group" aria-label="...">
                    <button type="button" class="btn btn-sm btn-warning" onclick="location.href='/activitydb/projectagreement_update/{{ getAgreement.id }}'">Update Agreement</button>
                    {% if getAgreement.approval == "approved" %}
                        <button data-toggle="tooltip" data-placement="top" title="Agreement has been approved and can no longer be deleted." type="button" class="btn btn-sm btn-frozen">Delete Agreement</button>
                        {% if getComplete%}
                            <button data-toggle="tooltip" data-placement="top" title="A completion form has already been created for the project" type="button" class="btn btn-sm btn-frozen">Complete Project</button>
                        {% else %}
                            <button type="button" class="btn btn-sm btn-info" onclick="location.href='/activitydb/projectcomplete_add/{{ getAgreement.id }}'">Complete Project</button>
                        {% endif %}
                    {% else %}
                        <button type="button" class="btn btn-sm btn-danger" onclick="location.href='/activitydb/projectagreement_delete/{{ getAgreement.id }}'">Delete Agreement</button>
                        <button data-toggle="tooltip" data-placement="top" title="Once Approved you will be able to click here and complete the project" type="button" class="btn btn-sm btn-frozen">Complete Project</button>
                    {% endif %}
                </div>
            </li>
            <li class="list-group-item">
                {% if getAgreement.approval == "approved" %}
                    <button class="btn btn-success" type="button">
                      Approved
                    </button>
                {% else %}
                    <button class="btn btn-primary" type="button" onclick="location.href='/activitydb/projectagreement_update/{{ getAgreement.id }}'">
                    {% if getAgreement.approval %}
                        {{ getAgreement.approval|title }}
                    {% else %}
                        Open
                    {% endif %}
                    </button>
                {% endif %}
             </li>
        </ul>
    {% endif %}
    {% if getComplete %}
        <ul class="list-group">
            <li class="list-group-item list-group-item-info">
                <h4>Project Completion</h4>
            </li>
            <li class="list-group-item"><b>Name: </b>{{ getComplete.project_name }}<br/>
                <b>Activity Code: </b>{{ getComplete.activity_code }}<br/>
                <b>Created:</b> <span class="date-badge">{{ getComplete.create_date|date }}</span> <b>Edited:</b> <span class="date-badge">{{ getComplete.edit_date|date }}</span>
            </li>
            <li class="list-group-item">
                <div class="btn-group" role="group" aria-label="...">
                    <button type="button" class="btn btn-sm btn-warning" onclick="location.href='/activitydb/projectcomplete_update/{{ getComplete.id }}'">Update Completion</button>
                    <button type="button" class="btn btn-sm btn-danger" onclick="location.href='/activitydb/projectcomplete_delete/{{ getComplete.id }}'">Delete Completion</button>
                </div>
            </li>
            <li class="list-group-item">
                {% if getComplete.approval == "approved" %}
                    <button class="btn btn-success" type="button">
                      Approved
                    </button>
                {% else %}
                    <button class="btn btn-primary" type="button" onclick="location.href='/activitydb/projectcomplete_update/{{ getComplete.id }}'">
                      {% if getComplete.approval %}
                        {{ getComplete.approval|title }}
                      {% else %}
                        Open
                      {% endif %}
                    </button>
                {% endif %}
             </li>
        </ul>
    {% endif %}
    <button class="btn btn-primary" type="button" onclick="location.href='/activitydb/documentation_list/{{ getAgreement.id }}'">
        Documents <span class="badge">{{ getDocumentCount }}</span>
    </button>
    <button class="btn btn-primary" type="button" onclick="location.href='/activitydb/community_list/0/{{ getAgreement.id }}'">
        Communities <span class="badge">{{ getCommunityCount }}</span>
    </button>
    <button class="btn btn-primary" type="button" onclick="location.href='/activitydb/training_list/{{ getAgreement.id }}'">
        Training <span class="badge">{{ getTrainingCount }}</span>
    </button>
    <button class="btn btn-primary" type="button" onclick="location.href='/activitydb/monitor_list/{{ getAgreement.id }}'">
        Project Planning <span class="badge">{{ getMonitoringCount }}</span>
    </button>
    <button class="btn btn-primary" type="button" onclick="location.href='/activitydb/checklist_list/{{ getAgreement.id }}'">
        Checklist <span class="badge">{{ getChecklistCount }}</span>
    </button>
    </div>
</ul>

<!-- Modal -->
<div class="modal fade" id="importModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
        </div> <!-- /.modal-content -->
    </div> <!-- /.modal-dialog -->
</div> <!-- /.modal -->
{% endblock content %}