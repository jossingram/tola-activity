{% extends "base.html" %}
{% block bread_crumb %}
<ol class="breadcrumb">
  <li><a href="/activitydb/dashboard/0/">Program Dashboards</a></li>
  {%  if project_proposal_id != '0' %}
    <li><a href="/activitydb/dashboard/project/{{ project_proposal_id }}/">Project Dashboards</a></li>
  {% endif %}
  <li class="active">Communites</li>
</ol>
{% endblock %}
{% load group_tag %}
{% block page_title %}Community List{% endblock %}

{% block content %}
<div>

    <a href="/activitydb/community_add" class="btn btn-large btn-success">New Community</a> &nbsp;
    <a href="/activitydb/community_import" class="btn btn-large btn-info">Import Community</a>

<hr/>
</div>
<style>
    #map { height: 480px; }
</style>

<form action="#" method="post">
<p>Zoom to Region: 	<select id="region" onchange="ZoomToCountry(this.value);">
				<option value="1">All Regions</option>
				<option>East & Southern Africa</option>
				<option>Central & South Asia</option>
				<option>West & Central Africa</option>
				<option>East Asia</option>
				<option>Latin America, Caribbean, Balkans, Caucasus</option>
				<option>Middle East</option>
			</select></p>
</form>
<p><b>Communities</b></p>
<div id="map"></div>

{% include "activitydb/community_map.html" %}

<script>
    function ZoomToCountry(region){
        if(region == "Latin America, Caribbean, Balkans, Caucasus"){
            map.setView([9,-60], 4);
        }else if(region == "East Asia"){
            map.setView([30,96], 4);
        }else if(region == "Central & South Asia"){
            map.setView([30,80], 4);
        }else if(region == "East & Southern Africa"){
            map.setView([10,10], 4);
        }else if(region == "West & Central Africa"){
            map.setView([10,10], 4);
        }else if(region == "Latin America, Caribbean, Balkans, Caucasus"){
            map.setView([30,20], 4);
        }else if(region == "Middle East"){
            map.setView([30,20], 4);
        }else if(region == "1"){
            map.setView([10,-10], 2);
        };
    }
</script>

<ul class="list-group">
{% for item in getCommunity %}
    <li class="list-group-item"><b>{{ item.create_date|date }} - {{ item.name }}</b>
    <div class="btn-group align-right" role="group" aria-label="...">
        <a href="/activitydb/community_update/{{ item.id }}" class="btn btn-xs btn-warning">Update Community</a>
        {% if request.user|has_group:"Editor" %}
            <a href="/activitydb/community_delete/{{ item.id }}" class="btn btn-xs btn-danger">Delete Community</a>
        {% endif %}
    </div>
    </li>
{% empty %}
    <li class="list-group-item">No communities yet.</li>
{% endfor %}
</ul>
{% endblock content %}